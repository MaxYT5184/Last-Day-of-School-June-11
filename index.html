<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéâ Last Day of School Countdown üéâ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(135deg, #74ebd5, #acb6e5);
      color: #222;
      text-align: center;
      overflow: hidden;
      position: relative;
    }
    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      background-color: #1e66f5;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      z-index: 10;
      user-select: none;
    }
    #countdown {
      font-size: 2.5rem;
      margin: 20px 0;
      background-color: #1e66f5;
      color: white;
      padding: 10px 15px;
      border-radius: 6px;
      display: inline-block;
      min-width: 250px;
      user-select: none;
      z-index: 10;
    }
    button {
      background-color: #1e66f5;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      cursor: pointer;
      border-radius: 8px;
      margin: 10px;
      transition: 0.3s;
      min-width: 220px;
      z-index: 10;
    }
    button:hover {
      background-color: #0056b3;
    }
    audio {
      display: none;
    }

    /* Chat Box Styling */
    #chatBox {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      max-height: 320px;
      overflow-y: auto;
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      font-size: 14px;
      z-index: 3000;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      user-select: none;
    }

    .chatMessage {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      background: #e6f0ff;
      padding: 8px 12px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      animation: fadeIn 0.4s ease;
      word-wrap: break-word;
    }

    .chatAvatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #1e66f5;
      flex-shrink: 0;
    }

    .chatText {
      display: flex;
      flex-direction: column;
      text-align: left;
      color: #222;
    }

    .chatUser {
      font-weight: bold;
      color: #1e66f5;
      margin-bottom: 2px;
      white-space: nowrap;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Fullscreen celebration page styles */
    #celebrationPage {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: radial-gradient(circle, #220066, #000000);
      color: #fff;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 5000;
      user-select: none;
    }

    #celebrationPage h2 {
      font-size: 4rem;
      margin-bottom: 20px;
      text-shadow: 0 0 20px #ff00ff;
    }

    #thankYouMsg {
      font-size: 2rem;
      margin-top: 30px;
      opacity: 0.85;
    }
  </style>
</head>
<body>

  <h1>üéâ Countdown to the Last Day of School üéâ</h1>
  <div id="countdown">Loading...</div>

  <button id="playMusic">‚ñ∂Ô∏è Play Music</button>
  <button id="crazyMode">üöÄ Go Crazy Mode</button>

  <audio id="music" src="max.mp3" loop></audio>

  <div id="chatBox"></div>

  <div id="celebrationPage">
    <h2>üéÜ PARTY TIME! üéÜ</h2>
    <canvas id="fireworksCanvas"></canvas>
    <div id="thankYouMsg">Thank you for coming!</div>
  </div>

<script>
  // ==== Countdown logic ====
  const countdownEl = document.getElementById("countdown");
  const targetStart = new Date("June 11, 2025 00:00:00").getTime();
  const targetEnd = new Date("June 11, 2025 09:05:00").getTime();

  let countdownInterval;
  let partyStarted = false;
  let partyEnded = false;

  function updateCountdown() {
    const now = Date.now();

    if (now >= targetEnd) {
      if (!partyEnded) {
        countdownEl.textContent = "üéâ Party has ended! Thank you for coming! üéâ";
        showCelebration(false);
        partyEnded = true;
        stopFireworks();
      }
      clearInterval(countdownInterval);
      return;
    }

    if (now >= targetStart) {
      if (!partyStarted) {
        countdownEl.textContent = "üéâ It's Party Time! üéâ";
        showCelebration(true);
        partyStarted = true;
      }
      // Show remaining party time countdown
      const diff = targetEnd - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      countdownEl.textContent = `Party ends in ${hours}h ${minutes}m ${seconds}s`;
      return;
    }

    // Before party starts, show countdown to party start
    const diff = targetStart - now;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
  }

  countdownInterval = setInterval(updateCountdown, 1000);
  updateCountdown();

  // ==== Music button logic ====
  const music = document.getElementById("music");
  const playBtn = document.getElementById("playMusic");

  playBtn.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      playBtn.textContent = "‚è∏ Pause Music";
    } else {
      music.pause();
      playBtn.textContent = "‚ñ∂Ô∏è Play Music";
    }
  });

  // ==== Crazy Mode Button ====
  const crazyBtn = document.getElementById("crazyMode");

  crazyBtn.addEventListener("click", startCrazyMode);

  // ==== Schedule Crazy Mode at 9:04 AM ====
  const crazyModeAutoStart = new Date("June 11, 2025 09:04:00").getTime();

  function scheduleCrazyMode() {
    const now = Date.now();
    const delay = crazyModeAutoStart - now;

    if (delay <= 0) {
      startCrazyMode();
    } else {
      setTimeout(startCrazyMode, delay);
    }
  }

  // ==== Start Crazy Mode function ====
  function startCrazyMode() {
    for (let i = 0; i < 20; i++) {
      const win = window.open("", "_blank", "width=400,height=300");
      if (win) {
        win.document.write(`
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <title>Countdown</title>
            <style>
              body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #74ebd5, #acb6e5);
                color: #222;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0;
                text-align: center;
              }
              h1 {
                font-size: 2rem;
                background-color: #1e66f5;
                color: white;
                padding: 10px 20px;
                border-radius: 6px;
                margin-bottom: 20px;
              }
              #countdown {
                font-size: 1.5rem;
                background-color: #1e66f5;
                color: white;
                padding: 10px 15px;
                border-radius: 6px;
                min-width: 180px;
              }
            </style>
          </head>
          <body>
            <h1>üéâ Countdown to June 11 üéâ</h1>
            <div id="countdown">Loading...</div>
            <audio autoplay loop src="max.mp3"></audio>
            <script>
              const countdownEl = document.getElementById('countdown');
              const targetDate = new Date('June 11, 2025 00:00:00').getTime();

              function updateCountdown() {
                const now = Date.now();
                const diff = targetDate - now;

                if (diff <= 0) {
                  countdownEl.textContent = "üéâ It's Party Time!";
                  clearInterval(interval);
                  return;
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                countdownEl.textContent = days + "d " + hours + "h " + minutes + "m " + seconds + "s";
              }

              updateCountdown();
              const interval = setInterval(updateCountdown, 1000);
            <\/script>
          </body>
          </html>
        `);
        win.document.close();
      }
    }
  }

  scheduleCrazyMode();

  // ==== Confetti and Fireworks ====

  const celebrationPage = document.getElementById('celebrationPage');
  const fireworksCanvas = document.getElementById('fireworksCanvas');
  const ctx = fireworksCanvas.getContext('2d');

  let fireworksAnimation;
  let confettiParticles = [];
  let fireworks = [];
  let fireworksStopTime;

  function showCelebration(start) {
    if (start) {
      celebrationPage.style.display = "flex";
      startConfetti();
      startFireworks();
      // Auto-stop fireworks after 10 hours
      fireworksStopTime = Date.now() + 10 * 60 * 60 * 1000;
      requestAnimationFrame(fireworksLoop);
    } else {
      celebrationPage.style.display = "flex";
      stopConfetti();
      stopFireworks();
      // Show thank you message (already visible)
    }
  }

  // --- Confetti ---

  const colors = ['#FFC107', '#8BC34A', '#00BCD4', '#E91E63', '#673AB7', '#FF5722', '#009688'];

  function randomRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  function createConfettiParticle() {
    return {
      x: randomRange(0, window.innerWidth),
      y: randomRange(-20, 0),
      r: randomRange(5, 10),
      d: randomRange(10, 30),
      color: colors[Math.floor(Math.random() * colors.length)],
      tilt: randomRange(-10, 10),
      tiltAngle: 0,
      tiltAngleIncrement: randomRange(0.05, 0.12),
      velocityY: randomRange(2, 5)
    };
  }

  function startConfetti() {
    confettiParticles = [];
    for (let i = 0; i < 150; i++) {
      confettiParticles.push(createConfettiParticle());
    }
    if (!confettiLoopRunning) {
      confettiLoopRunning = true;
      requestAnimationFrame(confettiLoop);
    }
  }

  function stopConfetti() {
    confettiLoopRunning = false;
    confettiParticles = [];
  }

  let confettiLoopRunning = false;

  function confettiLoop() {
    if (!confettiLoopRunning) return;
    ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
    confettiParticles.forEach(p => {
      p.tiltAngle += p.tiltAngleIncrement;
      p.y += p.velocityY;
      p.x += Math.sin(p.tiltAngle) * 2;
      p.tilt = Math.sin(p.tiltAngle) * 15;

      if (p.y > window.innerHeight) {
        p.x = randomRange(0, window.innerWidth);
        p.y = randomRange(-20, 0);
        p.tilt = randomRange(-10, 10);
      }

      ctx.beginPath();
      ctx.lineWidth = p.r / 2;
      ctx.strokeStyle = p.color;
      ctx.moveTo(p.x + p.tilt + p.r / 2, p.y);
      ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r / 2);
      ctx.stroke();
    });

    requestAnimationFrame(confettiLoop);
  }

  // --- Fireworks ---

  fireworksCanvas.width = window.innerWidth;
  fireworksCanvas.height = window.innerHeight;

  window.addEventListener('resize', () => {
    fireworksCanvas.width = window.innerWidth;
    fireworksCanvas.height = window.innerHeight;
  });

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  class Firework {
    constructor(sx, sy, tx, ty) {
      this.x = sx;
      this.y = sy;
      this.sx = sx;
      this.sy = sy;
      this.tx = tx;
      this.ty = ty;
      this.distanceToTarget = this.distance(sx, sy, tx, ty);
      this.distanceTraveled = 0;
      this.coordinates = [];
      this.coordinateCount = 3;
      while(this.coordinateCount--) {
        this.coordinates.push([this.x, this.y]);
      }
      this.angle = Math.atan2(ty - sy, tx - sx);
      this.speed = 5;
      this.acceleration = 1.05;
      this.brightness = random(50, 70);
      this.targetRadius = 8;
      this.exploded = false;
      this.particles = [];
    }
    distance(aX, aY, bX, bY) {
      const dx = bX - aX;
      const dy = bY - aY;
      return Math.sqrt(dx*dx + dy*dy);
    }
    update(index) {
      this.coordinates.pop();
      this.coordinates.unshift([this.x, this.y]);

      if(this.targetRadius < 8) {
        this.targetRadius += 0.3;
      } else {
        this.targetRadius = 8;
      }

      this.speed *= this.acceleration;

      const vx = Math.cos(this.angle) * this.speed;
      const vy = Math.sin(this.angle) * this.speed;
      this.distanceTraveled = this.distance(this.sx, this.sy, this.x + vx, this.y + vy);

      if(this.distanceTraveled >= this.distanceToTarget) {
        this.exploded = true;
        this.createParticles();
        fireworks.splice(index, 1);
      } else {
        this.x += vx;
        this.y += vy;
      }
    }
    draw() {
      ctx.beginPath();
      ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
      ctx.lineTo(this.x, this.y);
      ctx.strokeStyle = 'hsl(' + random(0, 360) + ', 100%, ' + this.brightness + '%)';
      ctx.stroke();

      // target circle
      ctx.beginPath();
      ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
      ctx.stroke();
    }
    createParticles() {
      const particleCount = 30;
      for(let i = 0; i < particleCount; i++) {
        this.particles.push(new Particle(this.tx, this.ty));
      }
      particles.push(...this.particles);
    }
  }

  class Particle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.coordinates = [];
      this.coordinateCount = 5;
      while(this.coordinateCount--) {
        this.coordinates.push([this.x, this.y]);
      }
      this.angle = random(0, Math.PI * 2);
      this.speed = random(1, 10);
      this.friction = 0.95;
      this.gravity = 0.7;
      this.hue = random(0, 360);
      this.brightness = random(50, 80);
      this.alpha = 1;
      this.decay = random(0.007, 0.015);
    }
    update(index) {
      this.coordinates.pop();
      this.coordinates.unshift([this.x, this.y]);
      this.speed *= this.friction;
      this.x += Math.cos(this.angle) * this.speed;
      this.y += Math.sin(this.angle) * this.speed + this.gravity;
      this.alpha -= this.decay;

      if(this.alpha <= 0) {
        particles.splice(index, 1);
      }
    }
    draw() {
      ctx.beginPath();
      ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
      ctx.lineTo(this.x, this.y);
      ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`;
      ctx.stroke();
    }
  }

  let fireworks = [];
  let particles = [];

  function fireworksLoop() {
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
    ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
    ctx.globalCompositeOperation = 'lighter';

    if (Date.now() > fireworksStopTime) {
      stopFireworks();
      return;
    }

    if (fireworks.length < 5) {
      const sx = random(0, fireworksCanvas.width);
      const sy = fireworksCanvas.height;
      const tx = random(0, fireworksCanvas.width);
      const ty = random(0, fireworksCanvas.height / 2);
      fireworks.push(new Firework(sx, sy, tx, ty));
    }

    fireworks.forEach((firework, i) => {
      firework.draw();
      firework.update(i);
    });

    particles.forEach((particle, i) => {
      particle.draw();
      particle.update(i);
    });

    fireworksAnimation = requestAnimationFrame(fireworksLoop);
  }

  function startFireworks() {
    fireworksStopTime = Date.now() + 10 * 60 * 60 * 1000; // 10 hours from now
    if (!fireworksAnimation) {
      fireworksAnimation = requestAnimationFrame(fireworksLoop);
    }
  }

  function stopFireworks() {
    if (fireworksAnimation) {
      cancelAnimationFrame(fireworksAnimation);
      fireworksAnimation = null;
      ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      fireworks = [];
      particles = [];
    }
  }

  // ==== Fake Fans Chat ====

  const chatBox = document.getElementById('chatBox');

  // Array of fake users with avatar URLs and custom emojis
  const fakeUsers = [
    { name: "Lunaüåô", avatar: "https://i.pravatar.cc/150?img=5", emojis: ["üòÉ","üéâ","üî•"] },
    { name: "MaxYTüéÆ", avatar: "https://i.pravatar.cc/150?img=10", emojis: ["üí•","üòé","üëç"] },
    { name: "Sora‚ú®", avatar: "https://i.pravatar.cc/150?img=15", emojis: ["üåü","üí¨","ü§£"] },
    { name: "Andyüõ†Ô∏è", avatar: "https://i.pravatar.cc/150?img=20", emojis: ["ü§ñ","üíª","üëè"] },
    { name: "MiaüíÉ", avatar: "https://i.pravatar.cc/150?img=25", emojis: ["üíñ","üòÑ","üéà"] },
    { name: "JayüöÄ", avatar: "https://i.pravatar.cc/150?img=30", emojis: ["üöÄ","üî•","üòú"] },
    { name: "Zaraüå∏", avatar: "https://i.pravatar.cc/150?img=35", emojis: ["üå∏","üòä","üé∂"] },
    { name: "Leoü¶Å", avatar: "https://i.pravatar.cc/150?img=40", emojis: ["ü¶Å","üí™","üòÇ"] },
  ];

  const fanMessages = [
    "This countdown is lit! üî•",
    "Can't wait for the party üéâ",
    "Who's ready for the fireworks? üéÜ",
    "Let's go crazy mode! üöÄ",
    "Max's music is the best! üéµ",
    "So hyped for June 11! üòé",
    "This is gonna be epic! üòç",
    "Keep the energy up! üí•",
    "Time to celebrate üéà",
    "Loving the vibes here! üòÑ",
    "Who's bringing snacks? üçø",
    "I'm dancing already! üíÉ",
    "Count me in! üôå",
    "The confetti looks awesome! üéä",
    "Fireworks show is next level! üéá",
  ];

  function addFakeMessage() {
    const user = fakeUsers[Math.floor(Math.random() * fakeUsers.length)];
    const message = fanMessages[Math.floor(Math.random() * fanMessages.length)];
    const emoji = user.emojis[Math.floor(Math.random() * user.emojis.length)];

    const msgDiv = document.createElement('div');
    msgDiv.classList.add('chatMessage');

    const avatarImg = document.createElement('img');
    avatarImg.classList.add('chatAvatar');
    avatarImg.src = user.avatar;
    avatarImg.alt = user.name;

    const textDiv = document.createElement('div');
    textDiv.classList.add('chatText');

    const userName = document.createElement('div');
    userName.classList.add('chatUser');
    userName.textContent = user.name;

    const messageText = document.createElement('div');
    messageText.textContent = message + " " + emoji;

    textDiv.appendChild(userName);
    textDiv.appendChild(messageText);

    msgDiv.appendChild(avatarImg);
    msgDiv.appendChild(textDiv);

    chatBox.appendChild(msgDiv);

    // Scroll to bottom
    chatBox.scrollTop = chatBox.scrollHeight;

    // Remove messages older than 50 for performance
    if (chatBox.children.length > 50) {
      chatBox.removeChild(chatBox.firstChild);
    }
  }

  // Add new fake message every 2.5 seconds
  setInterval(addFakeMessage, 2500);

</script>
</body>
</html>
